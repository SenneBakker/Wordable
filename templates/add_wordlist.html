{% extends "base.html" %}

{% block title %}Add Wordlist - Language Learning App{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Create New Wordlist</h1>
    <p>Add a name and word pairs for your new wordlist</p>
</div>

<form method="POST" class="wordlist-form">
    <div class="form-group">
        <label for="name">Wordlist Name *</label>
        <input type="text" id="name" name="name" required placeholder="e.g., Common Verbs, Travel Phrases">
    </div>

    <div class="form-section">
        <div class="section-header">
            <h3>Word Pairs</h3>
            <button type="button" class="btn btn-secondary" onclick="addWordRow()">+ Add Row</button>
        </div>

        <div class="word-table">
            <table id="wordsTable">
                <thead>
                    <tr>
                        <th>Language A (e.g., English)</th>
                        <th>Language B (e.g., Portuguese)</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="wordRows">
                    <tr>
                        <td><input type="text" name="language_a[]" placeholder="hello" required></td>
                        <td><input type="text" name="language_b[]" placeholder="olá" required></td>
                        <td><button type="button" class="btn-icon btn-remove" onclick="removeRow(this)" title="Remove row">×</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="language_a[]" placeholder="goodbye"></td>
                        <td><input type="text" name="language_b[]" placeholder="adeus"></td>
                        <td><button type="button" class="btn-icon btn-remove" onclick="removeRow(this)" title="Remove row">×</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" name="language_a[]" placeholder="thank you"></td>
                        <td><input type="text" name="language_b[]" placeholder="obrigado"></td>
                        <td><button type="button" class="btn-icon btn-remove" onclick="removeRow(this)" title="Remove row">×</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="form-actions">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
        <button type="submit" class="btn btn-primary">Save Wordlist</button>
    </div>
</form>
{% endblock %}

{% block scripts %}
<script>
function addWordRow() {
    const tbody = document.getElementById('wordRows');
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
        <td><input type="text" name="language_a[]" placeholder="word"></td>
        <td><input type="text" name="language_b[]" placeholder="translation"></td>
        <td><button type="button" class="btn-icon btn-remove" onclick="removeRow(this)" title="Remove row">×</button></td>
    `;
    tbody.appendChild(newRow);
}

function removeRow(button) {
    const row = button.closest('tr');
    const tbody = document.getElementById('wordRows');
    
    // Prevent removing the last row
    if (tbody.children.length > 1) {
        row.remove();
    } else {
        alert('You must have at least one word row!');
    }
}
</script>
{% endblock %}
